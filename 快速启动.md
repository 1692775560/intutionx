# Mora Backend å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ æ–¹æ¡ˆä¸€ï¼šä¸ä½¿ç”¨æ•°æ®åº“ç›´æ¥æµ‹è¯•ï¼ˆæ¨èï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šå¿«é€Ÿæµ‹è¯•APIåŠŸèƒ½ï¼Œä¸ä¿å­˜ä¼šè¯æ•°æ®

### æ­¥éª¤ï¼š

1. **ä¿®æ”¹ä»£ç è·³è¿‡æ•°æ®åº“åˆå§‹åŒ–**ï¼ˆå·²ä¸ºä½ å‡†å¤‡å¥½æ›¿ä»£æ–¹æ¡ˆï¼‰

2. **å¯åŠ¨Redis**ï¼ˆç¼“å­˜æœåŠ¡ï¼‰ï¼š
```bash
# å¦‚æœæ²¡æœ‰Redisï¼Œå¯ä»¥å…ˆè·³è¿‡ï¼Œä»£ç ä¼šé™çº§å¤„ç†
brew install redis
brew services start redis
```

3. **å¯åŠ¨åç«¯**ï¼š
```bash
cd /Users/Zhuanz/Desktop/Mora/mora-backend
source venv/bin/activate
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

4. **è®¿é—®APIæ–‡æ¡£**ï¼š
   - http://localhost:8000/docs

---

## ğŸ—„ï¸ æ–¹æ¡ˆäºŒï¼šå®Œæ•´æ•°æ®åº“é…ç½®

### 1. å®‰è£…PostgreSQL

**macOS (ä½¿ç”¨Homebrew)**ï¼š
```bash
# å®‰è£…PostgreSQL
brew install postgresql@15

# å¯åŠ¨PostgreSQLæœåŠ¡
brew services start postgresql@15

# åˆ›å»ºæ•°æ®åº“
createdb mora
```

### 2. å®‰è£…Redis

```bash
brew install redis
brew services start redis
```

### 3. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
cd /Users/Zhuanz/Desktop/Mora/mora-backend
source venv/bin/activate
alembic upgrade head
```

### 4. å¯åŠ¨åç«¯

```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

---

## ğŸ³ æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨Dockerï¼ˆæœ€ç®€å•ï¼‰

åˆ›å»º `docker-compose.yml`ï¼š

```yaml
version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: mora
      POSTGRES_USER: mora
      POSTGRES_PASSWORD: mora_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

volumes:
  postgres_data:
```

å¯åŠ¨ï¼š
```bash
# å¯åŠ¨æ•°æ®åº“
docker-compose up -d

# è¿è¡Œè¿ç§»
source venv/bin/activate
alembic upgrade head

# å¯åŠ¨åç«¯
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

---

## âœ… éªŒè¯æœåŠ¡

### æ£€æŸ¥åç«¯çŠ¶æ€ï¼š
```bash
curl http://localhost:8000/health
```

### æµ‹è¯•åˆ›å»ºä¼šè¯ï¼š
```bash
curl -X POST http://localhost:8000/api/session \
  -H "Content-Type: application/json" \
  -d '{
    "videoUrl": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
    "language": "python"
  }'
```

---

## ğŸ”§ å¦‚æœé‡åˆ°é—®é¢˜

### PostgreSQLæœªå®‰è£…
```bash
# æ£€æŸ¥
which psql

# å®‰è£…
brew install postgresql@15
```

### Redisæœªå®‰è£…
```bash
# æ£€æŸ¥
which redis-cli

# å®‰è£…
brew install redis
```

### ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥8000ç«¯å£
lsof -i :8000

# ä½¿ç”¨å…¶ä»–ç«¯å£
uvicorn app.main:app --reload --port 8001
```

---

## ğŸ“Š æ¨èå¯åŠ¨é¡ºåº

**ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼ˆæœ€ç®€å•ï¼‰**ï¼š
1. âœ… ç¡®ä¿ä½ æä¾›çš„APIå¯†é’¥åœ¨ `.env` ä¸­ï¼ˆå·²é…ç½®ï¼‰
2. âœ… å¯åŠ¨åç«¯ï¼š`uvicorn app.main:app --reload`
3. âœ… è®¿é—® http://localhost:8000/docs æµ‹è¯•API
4. âš ï¸ å¦‚æœæµ‹è¯•æˆåŠŸä½†æ— æ³•ä¿å­˜æ•°æ®ï¼Œå†å®‰è£…PostgreSQL

**å®Œæ•´éƒ¨ç½²**ï¼š
1. å®‰è£…PostgreSQLå’ŒRedis
2. åˆ›å»ºæ•°æ®åº“
3. è¿è¡Œè¿ç§»
4. å¯åŠ¨åç«¯
5. æµ‹è¯•å®Œæ•´åŠŸèƒ½

---

## ğŸ¯ ç°åœ¨å°±å¼€å§‹

**æœ€å¿«çš„æ–¹å¼**ï¼ˆå…ˆæµ‹è¯•APIæ˜¯å¦å·¥ä½œï¼‰ï¼š

```bash
cd /Users/Zhuanz/Desktop/Mora/mora-backend
source venv/bin/activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

å³ä½¿æ²¡æœ‰æ•°æ®åº“ï¼ŒAPIæ–‡æ¡£å’ŒåŸºæœ¬æµ‹è¯•ä¹Ÿèƒ½è¿è¡Œï¼
