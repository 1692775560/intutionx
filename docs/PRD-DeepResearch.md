# Deep Research åŠŸèƒ½ PRD

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

### 1.1 å®šä½
Deep Research æ˜¯ Mora çš„ç¬¬äºŒä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·é€šè¿‡å…³é”®è¯æ¢ç´¢çŸ¥è¯†é¢†åŸŸï¼Œç”Ÿæˆäº¤äº’å¼çŸ¥è¯†å›¾è°±ï¼Œå¹¶å¯ä¸æ¯ä¸ªæ¦‚å¿µè¿›è¡Œæ·±åº¦å¯¹è¯ã€‚

### 1.2 ä¸ Video to Code çš„å…³ç³»

| ç»´åº¦ | Video to Code | Deep Research |
|------|--------------|---------------|
| å…¥å£ | é¦–é¡µè¾“å…¥è§†é¢‘ URL | é¦–é¡µè¾“å…¥å…³é”®è¯ |
| åŠŸèƒ½æŒ‰é’® | "Video to Code" | "Deep Research" |
| è¾“å‡º | ä»£ç  + æ‰§è¡Œç»“æœ | çŸ¥è¯†å›¾è°± + å¯¹è¯ |
| å·¥ä½œåŒº | `/workspace` | `/research` |
| è”åŠ¨ | - | ç‚¹å‡»è§†é¢‘ â†’ è·³è½¬ Video to Code |

---

## äºŒã€ç”¨æˆ·æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         é¦–é¡µ                                 â”‚
â”‚                                                             â”‚
â”‚   è¾“å…¥æ¡†: [transformer____________] [â†’]                      â”‚
â”‚                                                             â”‚
â”‚   [Video to Code]  [Deep Researchâœ“]  [Slides]  [...]        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ é€‰æ‹© Deep Research + ç‚¹å‡»å‘é€
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    /research å·¥ä½œåŒº                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         â”‚                           â”‚   â”‚
â”‚  â”‚      çŸ¥è¯†å›¾è°±ç”»å¸ƒ         â”‚       è¯¦æƒ…é¢æ¿            â”‚   â”‚
â”‚  â”‚                         â”‚                           â”‚   â”‚
â”‚  â”‚         â—‹ NLP           â”‚   Transformer             â”‚   â”‚
â”‚  â”‚         â”‚               â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚
â”‚  â”‚    â—‹â”€â”€â”€â”€â—â”€â”€â”€â”€â—‹          â”‚   æ³¨æ„åŠ›æœºåˆ¶çš„æ ¸å¿ƒæ¶æ„ï¼Œ    â”‚   â”‚
â”‚  â”‚  BERT   â”‚   GPT         â”‚   2017å¹´ç”±Googleæå‡º...    â”‚   â”‚
â”‚  â”‚         â”‚               â”‚                           â”‚   â”‚
â”‚  â”‚    â—‹â”€â”€â”€â”€â”´â”€â”€â”€â”€â—‹          â”‚   ğŸ“¹ ç›¸å…³è§†é¢‘              â”‚   â”‚
â”‚  â”‚ Encoder    Decoder      â”‚   â€¢ 3Blue1Brown è®²è§£      â”‚   â”‚
â”‚  â”‚                         â”‚   â€¢ ææ²è®ºæ–‡ç²¾è¯»           â”‚   â”‚
â”‚  â”‚                         â”‚   [â†’ å»å­¦ä¹ ]               â”‚   â”‚
â”‚  â”‚                         â”‚                           â”‚   â”‚
â”‚  â”‚                         â”‚   ğŸ” å±•å¼€å­æ¦‚å¿µ            â”‚   â”‚
â”‚  â”‚                         â”‚   [å±•å¼€]                   â”‚   â”‚
â”‚  â”‚                         â”‚                           â”‚   â”‚
â”‚  â”‚                         â”‚   ğŸ’¬ ä¸ TA å¯¹è¯            â”‚   â”‚
â”‚  â”‚                         â”‚   [å¼€å§‹å¯¹è¯]               â”‚   â”‚
â”‚  â”‚                         â”‚                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€åŠŸèƒ½è¯¦æƒ…

### 3.1 çŸ¥è¯†å›¾è°±ç”Ÿæˆ

**è¾“å…¥**: ç”¨æˆ·å…³é”®è¯ï¼ˆå¦‚ "transformer"ï¼‰

**å¤„ç†æµç¨‹**:
1. è°ƒç”¨ LLM ç”Ÿæˆç›¸å…³æ¦‚å¿µå’Œå±‚çº§å…³ç³»
2. è¿”å›å›¾æ•°æ®ç»“æ„ (nodes + edges)
3. å‰ç«¯æ¸²æŸ“ä¸ºå¯è§†åŒ–å›¾è°±

**LLM Prompt ç¤ºä¾‹**:
```
ç”¨æˆ·æƒ³äº†è§£ "${keyword}"ï¼Œè¯·ç”Ÿæˆä¸€ä¸ªçŸ¥è¯†å›¾è°±ã€‚

è¦æ±‚ï¼š
1. ä»¥ "${keyword}" ä¸ºä¸­å¿ƒèŠ‚ç‚¹
2. ç”Ÿæˆ 8-15 ä¸ªç›¸å…³æ¦‚å¿µèŠ‚ç‚¹
3. åŒ…å«ä¸Šçº§æ¦‚å¿µã€åŒçº§æ¦‚å¿µã€ä¸‹çº§æ¦‚å¿µ
4. æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ç®€çŸ­æè¿°ï¼ˆ20å­—ä»¥å†…ï¼‰

è¿”å› JSON æ ¼å¼ï¼š
{
  "nodes": [
    {"id": "1", "label": "Transformer", "description": "...", "level": 0},
    {"id": "2", "label": "Self-Attention", "description": "...", "level": 1},
    ...
  ],
  "edges": [
    {"source": "1", "target": "2", "relation": "åŒ…å«"},
    ...
  ]
}
```

### 3.2 èŠ‚ç‚¹è¯¦æƒ…é¢æ¿

**è§¦å‘**: ç‚¹å‡»ä»»æ„èŠ‚ç‚¹

**å†…å®¹**:
- æ¦‚å¿µåç§°
- è¯¦ç»†æè¿°ï¼ˆLLM ç”Ÿæˆï¼Œ100-200å­—ï¼‰
- ç›¸å…³è§†é¢‘åˆ—è¡¨ï¼ˆæœç´¢ Bç«™/YouTubeï¼‰
- æ“ä½œæŒ‰é’®

### 3.3 å±•å¼€å­æ¦‚å¿µ

**è§¦å‘**: ç‚¹å‡» [å±•å¼€] æŒ‰é’®

**å¤„ç†**:
1. è°ƒç”¨ LLM ç”Ÿæˆè¯¥èŠ‚ç‚¹çš„å­æ¦‚å¿µ
2. åŠ¨æ€æ·»åŠ åˆ°å›¾è°±ä¸­
3. æ›´æ–°å¯è§†åŒ–

### 3.4 ä¸èŠ‚ç‚¹å¯¹è¯

**è§¦å‘**: ç‚¹å‡» [å¼€å§‹å¯¹è¯] æŒ‰é’®

**å®ç°**:
1. æ‰“å¼€ Chat çª—å£
2. é¢„è®¾ System Promptï¼ˆè§’è‰²æ‰®æ¼”è¯¥æ¦‚å¿µï¼‰
3. ç”¨æˆ·è‡ªç”±æé—®

**System Prompt æ¨¡æ¿**:
```
ä½ ç°åœ¨æ‰®æ¼” "${node.label}" è¿™ä¸ªæ¦‚å¿µæœ¬èº«ï¼Œç”¨ç¬¬ä¸€äººç§°å›ç­”é—®é¢˜ã€‚

èƒŒæ™¯ï¼š
- åç§°ï¼š${node.label}
- æè¿°ï¼š${node.description}
- é¢†åŸŸï¼š${node.category}

å›ç­”é£æ ¼ï¼š
- ç”¨"æˆ‘"æŒ‡ä»£è‡ªå·±
- è§£é‡Šæ¸…æ™°æ˜“æ‡‚
- å¯ä»¥æåŠç›¸å…³æ¦‚å¿µ
```

### 3.5 è·³è½¬è§†é¢‘å­¦ä¹ 

**è§¦å‘**: ç‚¹å‡»è§†é¢‘é“¾æ¥æˆ– [å»å­¦ä¹ ] æŒ‰é’®

**å¤„ç†**:
1. è·å–è§†é¢‘ URL
2. è°ƒç”¨ `createSession(videoUrl)` åˆ›å»ºä»»åŠ¡
3. è·³è½¬åˆ° `/workspace?session={id}`
4. å¤ç”¨ Video to Code çš„å®Œæ•´æµç¨‹

---

## å››ã€æ•°æ®ç»“æ„

### 4.1 çŸ¥è¯†å›¾è°±

```typescript
interface KnowledgeNode {
  id: string;
  label: string;           // æ¦‚å¿µåç§°
  description: string;     // ç®€çŸ­æè¿°
  level: number;           // å±‚çº§ (0=ä¸­å¿ƒ, 1=ä¸€çº§, 2=äºŒçº§...)
  category?: string;       // åˆ†ç±»
  expanded?: boolean;      // æ˜¯å¦å·²å±•å¼€
}

interface KnowledgeEdge {
  source: string;          // æºèŠ‚ç‚¹ ID
  target: string;          // ç›®æ ‡èŠ‚ç‚¹ ID
  relation: string;        // å…³ç³»æè¿°
}

interface KnowledgeGraph {
  keyword: string;         // ç”¨æˆ·è¾“å…¥çš„å…³é”®è¯
  nodes: KnowledgeNode[];
  edges: KnowledgeEdge[];
}
```

### 4.2 èŠ‚ç‚¹è¯¦æƒ…

```typescript
interface NodeDetail {
  nodeId: string;
  fullDescription: string;  // è¯¦ç»†æè¿°
  relatedVideos: Array<{
    title: string;
    url: string;
    platform: 'bilibili' | 'youtube' | 'douyin';
    thumbnail?: string;
  }>;
  relatedConcepts: string[]; // ç›¸å…³æ¦‚å¿µ
}
```

---

## äº”ã€API è®¾è®¡

### 5.1 ç”ŸæˆçŸ¥è¯†å›¾è°±

```
POST /api/research/graph
Body: { keyword: "transformer" }
Response: { graphId: "xxx", graph: KnowledgeGraph }
```

### 5.2 è·å–èŠ‚ç‚¹è¯¦æƒ…

```
POST /api/research/node/detail
Body: { nodeId: "1", label: "Transformer" }
Response: NodeDetail
```

### 5.3 å±•å¼€å­èŠ‚ç‚¹

```
POST /api/research/node/expand
Body: { nodeId: "1", label: "Transformer" }
Response: { newNodes: [], newEdges: [] }
```

### 5.4 æœç´¢ç›¸å…³è§†é¢‘

```
POST /api/research/videos
Body: { keyword: "Transformer æ•™ç¨‹" }
Response: { videos: [...] }
```

### 5.5 èŠ‚ç‚¹å¯¹è¯

```
POST /api/research/chat
Body: { 
  nodeLabel: "Transformer",
  nodeDescription: "...",
  messages: [...]
}
Response: { reply: "..." }
```

---

## å…­ã€æŠ€æœ¯é€‰å‹

### 6.1 å‰ç«¯å›¾å¯è§†åŒ–

**æ¨è: AntV G6**
- ä¸“ä¸šçš„å›¾å¯è§†åŒ–åº“
- ä¸°å¯Œçš„äº¤äº’æ”¯æŒ
- èš‚èšé›†å›¢å‡ºå“ï¼Œæ–‡æ¡£å®Œå–„

```bash
pnpm add @antv/g6
```

### 6.2 åç«¯

å¤ç”¨ç°æœ‰æ¶æ„ï¼š
- FastAPI
- æ™ºè°± GLMï¼ˆçŸ¥è¯†å›¾è°±ç”Ÿæˆ + å¯¹è¯ï¼‰
- BibiGPTï¼ˆè§†é¢‘æœç´¢ï¼‰

---

## ä¸ƒã€é¡µé¢ç»“æ„

```
mora_hackathon_ui/
â”œâ”€â”€ client/src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Home.tsx           # é¦–é¡µï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ Workspace.tsx      # Video to Code å·¥ä½œåŒºï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚   â””â”€â”€ Research.tsx       # Deep Research å·¥ä½œåŒºï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ research/
â”‚   â”‚       â”œâ”€â”€ KnowledgeGraph.tsx   # å›¾è°±ç”»å¸ƒ
â”‚   â”‚       â”œâ”€â”€ NodeDetail.tsx       # è¯¦æƒ…é¢æ¿
â”‚   â”‚       â””â”€â”€ NodeChat.tsx         # èŠ‚ç‚¹å¯¹è¯çª—å£
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ api.ts             # æ·»åŠ  research API
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ research_api.py        # Research API ç«¯ç‚¹
â”‚   â”œâ”€â”€ knowledge_graph.py     # çŸ¥è¯†å›¾è°±ç”Ÿæˆ
â”‚   â””â”€â”€ video_search.py        # è§†é¢‘æœç´¢
```

---

## å…«ã€å®ç°è®¡åˆ’

### Phase 1: åŸºç¡€æ¡†æ¶ (P0)
1. åˆ›å»º `/research` é¡µé¢
2. é¦–é¡µ Deep Research æŒ‰é’®è·³è½¬
3. åŸºç¡€å¸ƒå±€ï¼ˆå·¦ä¾§å›¾è°± + å³ä¾§é¢æ¿ï¼‰

### Phase 2: çŸ¥è¯†å›¾è°± (P0)
1. åç«¯ï¼šLLM ç”Ÿæˆå›¾è°± API
2. å‰ç«¯ï¼šG6 æ¸²æŸ“å›¾è°±
3. ç‚¹å‡»èŠ‚ç‚¹æ˜¾ç¤ºè¯¦æƒ…

### Phase 3: äº¤äº’åŠŸèƒ½ (P1)
1. å±•å¼€å­èŠ‚ç‚¹
2. è§†é¢‘æœç´¢ + è·³è½¬
3. èŠ‚ç‚¹å¯¹è¯

### Phase 4: ä¼˜åŒ– (P2)
1. å›¾è°±åŠ¨ç”»æ•ˆæœ
2. æœç´¢/è¿‡æ»¤èŠ‚ç‚¹
3. å¯¼å‡º/åˆ†äº«

---

## ä¹ã€UI å‚è€ƒ

### 9.1 å›¾è°±æ ·å¼
- ä¸­å¿ƒèŠ‚ç‚¹ï¼šå¤§åœ† + é«˜äº®è‰²
- ä¸€çº§èŠ‚ç‚¹ï¼šä¸­åœ† + ä¸»è‰²
- äºŒçº§èŠ‚ç‚¹ï¼šå°åœ† + æµ…è‰²
- è¿çº¿ï¼šæ›²çº¿ + ç®­å¤´

### 9.2 é…è‰²
- ä¸­å¿ƒèŠ‚ç‚¹ï¼š#2563EB (è“è‰²)
- æ™®é€šèŠ‚ç‚¹ï¼š#6B7280 (ç°è‰²)
- é€‰ä¸­èŠ‚ç‚¹ï¼š#10B981 (ç»¿è‰²)
- è¿çº¿ï¼š#D1D5DB (æµ…ç°)

---

*åˆ›å»ºæ—¶é—´ï¼š2026-01-01*
